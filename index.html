<!DOCTYPE html>
<html>
<head>
    <title>ChatGPT Integration</title>
</head>
<body>
    <h1> ciao</h1>
    <div id="chat-container">
        <div id="chat-box">
            <!-- Qui verranno visualizzate le risposte della chat -->
        </div>
        <input type="text" id="user-input" placeholder="Scrivi qui la tua domanda">
    </div>

    <script>
const apiKey = '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';
const chatBox = document.getElementById('chat-box');
const userInput = document.getElementById('user-input');

userInput.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
        const userMessage = userInput.value;
        chatBox.innerHTML += `<div class="user-message">${userMessage}</div>`;
        userInput.value = '';

        // Chiamata all'API di ChatGPT
        fetch('https://api.openai.com/v1/engines/davinci-codex/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${apiKey}`
            },
            body: JSON.stringify({
                prompt: userMessage,
                max_tokens: 50
            })
        })
        .then(response => response.json())
        .then(data => {
            const chatResponse = data.choices[0].text;
            chatBox.innerHTML += `<div class="chat-message">${chatResponse}</div>`;
        })
        .catch(error => console.error('Errore nella richiesta API:', error));
    }
});
</script>
</body>
</html>
